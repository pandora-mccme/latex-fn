#!/usr/bin/bash
set -euo pipefail

trap 'rm -rf "$WD"' EXIT

WD=$(mktemp -d)
cd "$WD"

cat >main.zip
if unzip main.zip >main.log &&
    pdflatex main.tex >>main.log; then
    cat main.pdf
else
    tee /dev/stderr <main.log
    exit 1
fi
